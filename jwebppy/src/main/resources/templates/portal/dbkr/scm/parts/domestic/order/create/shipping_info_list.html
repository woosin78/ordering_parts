<!DOCTYPE html>
<html
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{portal/layout/popup/index}">

<th:block layout:fragment="content">
	<script type="application/javascript" th:src="@{/portal/js/portal.utils.order.js}"></script>
	
	<div class="block-header">
		<div class="block-title" th:text="#{	DCP_T_SHIPPING_INFO}"></div>
	</div>
	
	<div id="AREA_grid" class="flex-grow grid-area">
		<table id="TBL_grid" class="order-column stripe compact"></table>
	</div>		
	
<script type="application/javascript">

//화면중 일부 area 를 채우는 그리드 예제. 상위 div #sample-grid-area 영역을 100% 채움.
//컬럼 width 자동. scroller 자동.
//고정된 맵 데이터 사용. 페이지 생성시 데이터 넘겨서 그리드 만드는 방식

$(function(){
	
	$tableObj = $("#TBL_grid").DataTable({
		select: true,   			// row 선택 기능 켬
		ordering: true, 			// 정렬 기능 켬
		scrollY: 100,
		columns : [
			{
				name: "chk", 
				className:"center noselect",// row selection 기능 막음. 
				width: 20,// checkbox 컬럼은 width 작게
				orderable: false,// checkbox 는 정렬 불가
				render: function(data, type, row)
				{
					return '<input type="radio" name="chk" class="custom-ui"><label></label>';
				}
			},		
			{data: "VSBED", title: "[[#{DCP_L_SHIPPING_CONDITION}]]"},//Shipping Condition
			{data: "VSBED_TX", title: "[[#{DCP_L_DESCRIPTION}]]"}//Description
		],
		ajax: {
			url: "/portal/dbkr/scm/parts/domestic/order/create/shipping_info_list/data",
			data: function(p)
			{
				// ajax로 넘길 파라미터
				p.orderType = "[[${orderType}]]";
				p.priceGroup = "[[${priceGroup}]]";
				p.customerNo = "[[${customerNo}]]";
			},
			dataSrc: function(response)
			{
				return response.RESULT;
			}
		},
		initComplete:function(settings, json) 
		{			
			ProgressBar.hide();
		}
	});
	
	$("#TBL_grid").on("draw.dt", function () {
		// Datatable grid 초기 설정 셋업
		initGridTable($tableObj);		
	});
	
	$("#TBL_grid tbody").on("click", "td", function() {
		var row = $tableObj.row(this).data();
		
		opener.changeShippingInfo(row.VSBED, row.VSBED_TX);		
		
		window.close();
	});
});
</script>	
</th:block>