<!DOCTYPE html>
<html
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
			
<script th:src="@{/platform/js/jquery/jquery.min.js}"></script>

<input type="hidden" id="sRootId" name="sRootId" th:value="${fileUploadEditor.rootId}"/>
<input type="hidden" id="saveFilePath" name="saveFilePath" th:value="${fileUploadEditor.saveFilePath}"/>
<input type="hidden" id="sUploadedPath" name="sUploadedPath" th:value="${fileUploadEditor.uploadedPath}"/>
<input type="hidden" id="sBasePath" name="sBasePath" th:value="${fileUploadEditor.basePath}"/>

<script type="text/javascript">
window.onload = function()
{
	var sUploadedPath = $("#sUploadedPath").val();
	var sRootId = $("#sRootId").val();	
	var saveFilePath = $("#saveFilePath").val();				
	var origin = document.location.orign;
	var basePath = $("#sBasePath").val();	  // "/portal/editor_img/";
	
	if(origin) {		
		basePath = orign + basePath;
		strImagePath = basePath+saveFilePath;		
	} else {
		//origin 이 없을 경우 프로토콜과 호스트를 결합하여 url 경로 설정.	
		basePath = document.location.protocol + '//' + document.location.host + basePath;
		strImagePath = basePath+saveFilePath;		
	}	
	
	var root_id = sRootId;	
	if (strImagePath != undefined && strImagePath != "")
	{
		var str = '<img src="' + strImagePath + '" alt="' + saveFilePath + '" />';		
		var range = null;
		
		if(parent._xfe_object[root_id].xfeStackObject.xfeFocusoutRange) {
			range = parent._xfe_object[root_id].xfeStackObject.xfeFocusoutRange;
		} else {							
			if(parent.xfeBrowserFlag.isIE()){				
				if(parent.xfeBrowserFlag.getBrowserVersion() < 11) {					
					if(parent._xfe_object[root_id].xfeStackObject.xfeDocument.selection) {
						range = parent._xfe_object[root_id].xfeStackObject.xfeDocument.selection.createRange();	
					} else {
						range = parent._xfe_object[root_id].xfeStackObject.xfeSavedLastRange;
					}					
				} else {					
					if(parent._xfe_object[root_id].xfeRangeHandler.getDesignDocumentSelection().rangeCount > 0) {
						range = parent._xfe_object[root_id].xfeRangeHandler.getDesignDocumentSelection().getRangeAt(0);
					} else {
						range = parent._xfe_object[root_id].xfeStackObject.xfeSavedLastRange;
					}
				}			                        				
			} else {				
				if(parent._xfe_object[root_id].xfeStackObject.xfeDocument.getSelection) {				 					 
					if(parent._xfe_object[root_id].xfeRangeHandler.getDesignDocumentSelection().rangeCount > 0) {
						range = parent._xfe_object[root_id].xfeRangeHandler.getDesignDocumentSelection().getRangeAt(0);
					}else{
						range = parent._xfe_object[root_id].xfeStackObject.xfeSavedLastRange;
					}
				}               
			}				
		}					
		parent._xfe_object[root_id].xfeContentsHandler.insertHTML(str, range);					
	}		
};
</script>		
</html>		